# README: VSCode Configuration for ESP-IDF Development (Xtensa & RISC-V)

This README describes how to configure Visual Studio Code for ESP-IDF development on both Xtensa and RISC-V architectures. The configuration files and instructions below are intended to be committed to your repository.

## 1. Xtensa Development

- Use a custom ESP-IDF clangd binary (`esp-clang`) instead of the system clangd, as the standard version does not fully support the Xtensa toolchain.
- The `xtensa_settings.json` file (**rename to `settings.json` and place in your project's `.vscode` directory**) should specify the path to the ESP-IDF clangd, set up the correct toolchain driver, and enable code formatting.
- The configuration is more complex due to toolchain requirements.

## 2. RISC-V Development

- Use the standard system clangd binary, which works out-of-the-box for RISC-V projects.
- The `riscv_settings.json` file (**rename to `settings.json` and place in your project's `.vscode` directory**) should specify the path to the system clangd, set up the build directory, and enable code formatting.
- The configuration is simpler than for Xtensa; no custom toolchain flags or binaries are required.

## 3. Global clangd Configuration (`config.yaml`)

- Place the global clangd configuration file at `~/Library/Preferences/clangd/config.yaml`.
- Use this file to customize clangd behavior, such as removing unsupported compiler flags, configuring diagnostics, code style, and inlay hints.
- This configuration applies to all projects on your system that use clangd.
- Setting Up Global clangd Configuration
```sh
ln -s /Users/pil/repos/cikon-iot-solution/tools/vsconf/config.yaml ~/Library/Preferences/clangd/config.yaml
```
## 4. Global .clang-format Configuration

The `.clang-format` file defines code formatting rules for C/C++ and related languages, ensuring consistent style across your project and editor tools.

To enable a global formatting configuration, create a symbolic link to your preferred config file in your home directory:

```sh
ln -s /Users/pil/repos/cikon-iot-solution/tools/vsconf/.clang-format ~/.clang-format
```

This will apply the formatting rules system-wide for all supported editors and tools that use clang-format.

## Notes

- The `compile_commands.json` file must be generated by CMake/ESP-IDF and include the correct toolchain header paths.
- For Xtensa, using ESP-IDF's clangd is required for proper code intelligence.
- For RISC-V, the standard clangd is sufficient.
- Automatic code formatting and code intelligence are enabled via the recommended VSCode extensions.
- **Required extensions:**  
  - **Clang-Format** (`xaver.clang-format`)  
  - **LLVM/Clangd** (official extension for code intelligence)

---
This setup enables efficient ESP-IDF development in VSCode for both Xtensa and RISC-V architectures.